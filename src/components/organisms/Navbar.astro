---
import fetchApi from "../../lib/strapi.ts";
import type Navbar from "../../interfaces/navbar.ts";
import Language from "../molecules/Language.astro";

const navbars = await fetchApi<Navbar[]>({
  endpoint: "navbars?populate[Navbar]=*&populate[Languages][populate]=country",
  wrappedByKey: "data",
});

import Hamburger from "../icons/Hamburger.svg";
import X from "../icons/X.svg";
---

<script
  src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1"
  type="module"></script>

<nav
  class="fixed top-0 w-full bg-background/90 backdrop-blur-sm border-b border-border z-50"
>
  <div class="max-full px-2 sm:px-6 lg:px-8">
    <div class="w-full flex h-16 items-center lg:justify-between">
      <div class="absolute inset-y-0 left-0 flex items-center lg:hidden">
        <button
          type="button"
          command="--toggle"
          commandfor="mobile-menu"
          class="relative inline-flex items-center justify-center rounded-md p-2 text-foreground cursor-pointer focus:outline-2 focus:-outline-offset-1 focus:outline-primary"
        >
          <span class="absolute -inset-0.5"></span>
          <span class="sr-only">Open main menu</span>
          <Hamburger class="size-6 in-aria-expanded:hidden" />
          <X class="size-6 not-in-aria-expanded:hidden" />
        </button>
      </div>

      <a
        href="/"
        class="flex shrink-0 items-center text-black w-24 mx-auto lg:mx-0"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          xml:space="preserve"
          viewBox="0 0 912.41 359.34"
          ><path
            fill="currentColor"
            class="fil0"
            d="M474.29 61.09v266.46c0 13.32 15.13 28.44 28.44 28.44 14.72 0 15.52-1.1 27.68-10.23 6.06-4.55 51.11-39.39 55.74-41.16 7.66-2.93 229.85-1.31 257.82-1.27 13.26.02 17.49-.66 27.25-4.35 13.99-5.29 27.51-17.96 34.21-31.09 3.32-6.51 7-16.36 7-25.65V61.09c0-16.44-8.79-31.43-19.22-41.87C882.78 8.79 867.79 0 851.34 0H535.39c-22.59 0-45.1 17.15-54.79 36.84-2.89 5.88-6.29 15.47-6.29 24.25zm24.52 271.5V72.46c0-15.61.2-27.22 7.44-35.67 6.89-8.03 14.79-13.38 29.03-13.38h316.14c21.94 0 36.48 15.01 36.48 37.65v180.27c0 47.79-50.72 37.65-82.9 37.65H625.93c-61.23 0-50.07-5.45-92.69 27.55l-25.11 19.72c-2.85 2.21-6.09 5.47-9.32 6.36zm197.62-116.48c-6.75 0-13.09-.57-19-1.75a91 91 0 0 1-17.44-5.33c-5.72-2.37-11.46-5.31-17.21-8.8-3.49-2.11-6.02-3.88-7.56-5.33-1.56-1.42-2.53-2.78-2.89-4.07-.39-1.29-.57-2.94-.57-4.96 0-2.18.6-3.29 1.82-3.29.41 0 2.85 1.03 7.31 3.1s9.14 4 14.04 5.81c4.89 1.82 10.98 3.49 18.31 5.05 7.31 1.54 15.05 2.32 23.2 2.32 8.09 0 15.74-.76 22.95-2.3 7.24-1.52 13.49-3.26 18.79-5.21 5.28-1.95 10.04-3.91 14.22-5.86 4.21-1.95 6.48-2.92 6.85-2.92 1.22 0 1.82 1.1 1.82 3.29 0 2.07-.21 3.74-.64 5.03-.41 1.26-1.42 2.62-2.99 4-1.59 1.4-4.09 3.17-7.54 5.33-5.93 3.54-11.65 6.46-17.14 8.78a92 92 0 0 1-17.14 5.28c-5.9 1.22-12.31 1.82-19.18 1.82zm83.43-77.33c1.27 0 2.48-.34 3.53-.99.17-.11.4-.24.55-.35.36-.28.65-.52.97-.84.52-.51 1.21-1.46 1.49-2.13.61-1.47.7-1.91.7-3.64 0-1.5-.62-3.31-1.61-4.29-.81-.8-1.53-1.32-2.57-1.83l-1.03-.48c-.7-.34-1.36-.57-2.09-.86l-5.42-2c-.36-.12-.74-.29-1.1-.41l-17.35-6.4 18.45-6.56c.38-.14.73-.27 1.11-.39 2.11-.7 6.51-2.24 8.44-3.38l.88-.57c.52-.39.38-.31.76-.75.49-.56.81-1.09 1.07-1.88.26-.78.42-1.69.44-2.59v-.59c-.03-1.07-.25-2.12-.68-2.98-.11-.22-.18-.38-.3-.6s-.23-.35-.35-.55c-.4-.63-.29-.4-.6-.79-.09-.12-.1-.14-.21-.27-1.96-2.04-4.41-2.78-7.23-2.07-2.31.58-5.8 2.04-8.01 2.96-2.02.85-4.23 1.66-6.28 2.52l-20.29 8.22c-.53.22-1.06.43-1.56.67-.24.12-.48.21-.76.33-.27.11-.49.22-.75.34-1.55.69-2.15 1.05-3.39 2.09-.73.62-1.52 1.57-1.97 2.43-.43.83-.67 1.42-.84 2.47-.51 3.01.15 6.09 2.34 8.27 1.09 1.09 2.55 1.91 3.97 2.6.53.25 1.03.42 1.57.66 1.44.64 4.77 1.93 6.27 2.53 2.12.84 4.17 1.68 6.28 2.52l20.33 8.18c1.49.6 3.58 1.4 5.24 1.4m-142.01-23.63c-.13.17-1.88.68-2.13.76-.76.26-1.47.47-2.23.72l-15.53 5.03c-.76.21-1.47.51-2.23.72-1.6.44-3.82 1.3-5.38 1.97-1.15.49-2.19 1.25-2.92 2.26-.28.38-.57 1.06-.73 1.5-.25.69-.39 1.48-.43 2.29v.87c.05 1.1.3 2.19.74 3.08.21.43.41.77.65 1.15.23.35.98 1.2 1.31 1.47 3.38 2.73 6.05 1.85 9.81.57l4.77-1.74c1.07-.42 2.1-.75 3.17-1.17s2.1-.77 3.17-1.17c.51-.19 1.06-.39 1.58-.59.52-.21 1.04-.37 1.59-.59l7.92-2.93c1.44-.49 3.25-1.23 4.75-1.76 2.3-.82 5.59-2.06 7.81-3.03l2.84-1.5c.21-.15.43-.3.61-.47l1.57-1.69.63-1c1.41-2.83 1.29-6.97-.73-9.66-.57-.76-.38-.52-1.04-1.19-.13-.13-.14-.14-.29-.25l-2.28-1.58-6.05-2.75c-1.05-.45-2.01-.9-3.06-1.34l-26.11-11.39c-2.6-1.22-5.6-2.11-8.38-.62-1.69.91-2.92 2.41-3.61 4.22-.74 1.94-.52 4.54.57 6.37.48.8 1.19 1.43 1.97 1.95 1.59 1.06 3.4 1.8 5.28 2.55 3.75 1.5 7.46 2.98 11.19 4.48l11.21 4.46zM.01 177.67h36.34v9.49c10.79-6.33 22.88-9.49 36.34-9.49 20.09 0 37.27 7.13 51.4 21.27 1.12 1.12 2.11 2.17 3.1 3.29.93-1.12 1.98-2.17 3.1-3.29 14.14-14.14 31.31-21.27 51.4-21.27s37.21 7.13 51.41 21.27c14.14 14.2 21.27 31.32 21.27 51.41v109.01h-36.34V250.35c0-10.05-3.53-18.6-10.67-25.67-7.07-7.13-15.63-10.67-25.67-10.67-10.05 0-18.66 3.53-25.73 10.67-7.07 7.07-10.6 15.63-10.6 25.67v109.01h-36.34V250.35c0-10.05-3.53-18.6-10.66-25.67-7.07-7.13-15.63-10.67-25.67-10.67-10.05 0-18.6 3.53-25.73 10.67-7.07 7.07-10.6 15.63-10.6 25.67v109.01H.02V177.67zm414.96 72.67c-2.67-7.5-7.01-14.26-13.08-20.34-10.67-10.67-23.5-16-38.51-16-15 0-27.84 5.33-38.51 16-6.08 6.08-10.42 12.84-13.08 20.34zm-11.1 54.5 32.37 18.17-8.56 9.61c-17.8 17.8-39.25 26.73-64.3 26.73s-46.51-8.87-64.24-26.6c-17.73-17.74-26.6-39.19-26.6-64.24s8.87-46.45 26.6-64.24c17.74-17.74 39.19-26.6 64.24-26.6s46.45 8.87 64.24 26.6c17.73 17.8 26.6 39.19 26.6 64.24 0 6.33-.56 12.34-1.67 18.17H311.79c2.67 7.5 7.01 14.32 13.08 20.34 10.67 10.67 23.5 16 38.51 16s27.84-5.33 38.51-16c.74-.74 1.36-1.43 1.98-2.17zM39.84 113.03C25 107.9 15.17 103.71 10.27 100.4c-4.9-3.3-8.16-9.09-9.75-17.41-1.59-8.31.54-16.44 6.37-24.36 5.87-7.93 15.85-12.08 30-12.43 14.14-.31 28.6 3.85 43.32 12.47L69.84 78.02c-12.28-7.27-22.73-10.96-31.36-11.04S25 69.58 23.91 75.02c-1.09 5.4 1.98 9.83 9.29 13.21 7.27 3.34 15.08 6.3 23.39 8.74 8.31 2.49 14.34 5.44 18.11 8.9 3.73 3.42 5.98 8.51 6.72 15.19.7 6.68-.15 12.78-2.64 18.38-2.45 5.56-6.61 10.3-12.39 14.18-5.83 3.85-13.91 6.22-24.25 7.11-10.37.86-24.25-2.76-41.61-10.88l10.26-19.47c12.43 5.32 22.77 8.35 31.01 9.09 8.24.78 13.68-2.18 16.36-8.82 2.64-6.64-3.46-12.51-18.3-17.64zm141.12-20.2c-1.67-4.7-4.39-8.94-8.2-12.74-6.68-6.68-14.73-10.03-24.13-10.03s-17.45 3.34-24.13 10.03c-3.81 3.81-6.53 8.04-8.2 12.74zM174 126.98l20.28 11.38-5.36 6.02c-11.15 11.15-24.6 16.75-40.29 16.75-15.7 0-29.14-5.56-40.25-16.67s-16.67-24.56-16.67-40.25c0-15.7 5.56-29.1 16.67-40.25 11.11-11.11 24.56-16.67 40.25-16.67 15.7 0 29.1 5.56 40.25 16.67 11.11 11.15 16.67 24.56 16.67 40.25 0 3.96-.35 7.73-1.05 11.38h-88.2c1.67 4.7 4.39 8.98 8.2 12.74 6.68 6.68 14.73 10.02 24.13 10.02s17.45-3.34 24.13-10.02c.47-.47.85-.89 1.24-1.36zm134.01-22.77c0-9.4-3.34-17.45-10.02-24.13s-14.73-10.03-24.13-10.03-17.45 3.34-24.13 10.03c-6.68 6.68-10.03 14.72-10.03 24.13v56.92h-22.77V47.29h22.77v11.27c9.79-7.5 21.18-11.27 34.15-11.27 15.7 0 29.1 5.56 40.25 16.67 11.11 11.15 16.67 24.56 16.67 40.25v56.92H308v-56.92zm91.08-34.15c-9.4 0-17.45 3.34-24.13 10.03-6.68 6.68-10.03 14.72-10.03 24.13 0 9.4 3.34 17.45 10.03 24.13 6.68 6.68 14.72 10.02 24.13 10.02 9.4 0 17.45-3.34 24.13-10.02s10.02-14.73 10.02-24.13-3.34-17.45-10.02-24.13-14.73-10.03-24.13-10.03m34.15 79.81c-9.79 7.5-21.18 11.27-34.15 11.27-15.7 0-29.14-5.56-40.25-16.67s-16.67-24.56-16.67-40.25c0-15.7 5.56-29.1 16.67-40.25 11.11-11.11 24.56-16.67 40.25-16.67 12.98 0 24.36 3.77 34.15 11.27V1.76h22.77v159.38h-22.77z"
          ></path></svg
        >
      </a>

      <div class="hidden lg:flex gap-x-4 items-center">
        <div class="flex space-x-4 h-full items-center">
          {
            navbars[0].Navbar.map((item: any) => (
              <a
                href={`#${item.buttonPath}`}
                class="text-md text-gray-800 hover:text-primary transition-colors duration-200 font-medium"
              >
                {item.text}
              </a>
            ))
          }
        </div>

        <div class="flex items-center gap-x-2">
          <Language languages={navbars[0].Languages} />
        </div>
      </div>
    </div>
  </div>
</nav>

<el-disclosure id="mobile-menu" hidden class="block lg:hidden">
  <div class="flex flex-col space-y-1 px-2 pt-20 pb-3">
    {
      navbars[0].Navbar.map((item: any) => (
        <a
          href={`#${item.buttonPath}`}
          class="text-md hover:text-primary transition-colors duration-200 font-medium"
        >
          {item.text}
        </a>
      ))
    }
    <div class="flex items-center gap-x-3 px-3 pt-3">
      <Language languages={navbars[0].Languages} />
    </div>
  </div>
</el-disclosure>
