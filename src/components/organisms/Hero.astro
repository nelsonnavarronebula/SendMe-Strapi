---
import fetchApi from "../../lib/strapi.ts";
import type Hero from "../../interfaces/hero.ts";
import Section from "../atoms/Section.astro";
import Button from "../atoms/Button.astro";
import StatsHero from "../molecules/StatsHero.astro";

const heroData = await fetchApi<Hero[]>({
  endpoint: "heroes?populate=*",
  wrappedByKey: "data",
});

console.log(heroData[0].Buttons[0].textButton);
---

<Section
  class="min-h-screen bg-gradient-to-br from-white via-blue-50/20 to-purple-50/30 mx-4"
>
  <div
    class="relative z-10 gap-y-4 gap-x-20 flex flex-col items-center lg:flex-row md:mx-15 lg:mx-30 w-full"
  >
    <div class="gap-y-10 flex flex-col w-full">
      <h1
        class="text-4xl sm:text-5xl lg:text-6xl font-bold text-foreground leading-tight flex flex-col"
      >
        <div>
          {heroData[0].title[0].children[0].text}
          <span class="text-primary"
            >{heroData[0].title[1].children[0].text}</span
          >
        </div>

        <span
          class="text-4xl sm:text-5xl lg:text-6xl font-bold text-foreground leading-tight"
          >{heroData[0].title[2].children[0].text}</span
        >
      </h1>
      <p class="text-lg text-muted-foreground w-full leading-relaxed">
        {heroData[0].description}
      </p>

      <div class="flex gap-4">
        {heroData[0].CardFeature.map((item) => <StatsHero item={item} />)}
      </div>

      <div class="flex gap-y-2 gap-x-2">
        {
          heroData[0].Buttons.map((item) => (
            <Button isPrimary={item.isPrimary}  href={item.buttonPath}>{item.textButton}</Button>
          ))
        }
      </div>
    </div>
    <div class="w-full flex items-center">
      <lottie-player
        src="../../../public/ImageHero.json"
        background="transparent"
        speed="1"
        loop
        autoplay></lottie-player>
    </div>
  </div>

  <div
    class="absolute top-20 right-1/4 sm:right-1/4 w-[30%] sm:w-[40%] md:w-[30%] lg:w-96 h-[30%] sm:h-[40%] md:h-[30%] lg:h-96
         bg-gradient-to-br from-[var(--primary)]/30 via-[var(--accent)]/20 to-[var(--secondary)]/10
         rounded-full blur-3xl z-0"
  >
  </div>

  <div
    class="absolute bottom-20 left-1/4 sm:left-1/4 w-[25%] sm:w-[30%] md:w-[30%] lg:w-80 h-[25%] sm:h-[30%] md:h-[30%] lg:h-80
         bg-gradient-to-br from-[var(--primary)]/40 via-[var(--accent)]/30 to-[var(--secondary)]/20
         rounded-full blur-3xl z-0"
  >
  </div>

  <div
    class="absolute top-1/3 left-1/2 sm:left-1/3 w-[20%] sm:w-[25%] md:w-[20%] lg:w-64 h-[20%] sm:h-[25%] md:h-[20%] lg:h-64
         bg-gradient-to-br from-[var(--accent)]/25 via-[var(--secondary)]/20 to-[var(--muted)]/15
         rounded-full blur-3xl z-0"
  >
  </div>
</Section>
